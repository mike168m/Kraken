<meta charset='utf-8' emacsmode='-*- markdown -*-'>
<link rel='stylesheet' href='https://casual-effects.com/markdeep/latest/apidoc.css?'>
<style>.backtick, .tilde {overflow-x: auto;} .longTOC {overflow-x: hidden;}</style>
# Kraken
===
Kraken is an opensource header only c library for writing multicore multithread programs using
green threads on x86 (Linux, Windows & MacOSX), AVR amd ARM.
## Example

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~C
#define KRAKEN_SCHEDULER    0x01
#define KRAKEN_MAX_THREADS  0x04
#include "kraken.h"

KRAKEN_THREAD_FUNCTION( first_thread,
{
    static int var_1 = 0;
    while (TRUE) 
    {
        // do some work
        var_1 += 1;
        printf( "In thread 1. var_1 = %d", var_1 );
        kraken_yield( runtime );
    }
})

KRAKEN_THREAD_FUNCTION( second_thread,
{
    static int var_2 = 0;
    while (TRUE)
    {
      // do some other work.
      var_2 += 2;
      printf( "In thread 2. var_2 = %d", var_2 );
      kraken_yield( runtime );
    } 
})


int main ( void )
{
    // Create a new single core kraken runtime.
    // A runtime is responsible creating and managing threads on a cpu core.
    struct kraken_runtime* my_runtime = kraken_initialize_runtime();
    // Use these predefined macros to schedule your threads to be run.
    KRAKEN_SCHEDULE_THREAD( my_runtime, first_thread );
    KRAKEN_SCHEDULE_THREAD( my_runtime, second_thread );
    // Next we start the runtime and specify a return value for main.
    kraken_run( runtime, 0 );
}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<script>markdeepOptions={tocStyle:'long'};</script>
<!-- Markdeep: --><script src='https://casual-effects.com/markdeep/latest/markdeep.min.js?'></script>
